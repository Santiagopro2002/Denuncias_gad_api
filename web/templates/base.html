{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    {% block meta %}
      <meta charset="utf-8" />
      <meta content="width=device-width, initial-scale=1.0" name="viewport" />
      <title>GAD Municipal de Salcedo</title>
      <meta content="" name="description" />
      <meta content="" name="keywords" />

      <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
      <script src="{% static 'chartkick/Chart.bundle.js' %}"></script>
      <script src="{% static 'chartkick/chartkick.js' %}"></script>
    
      {{ form.media.css }}

      <!-- Favicons -->
      <link href="{% static 'assets/img/logo_web.png' %}" rel="icon" />
      <link
        href="{% static 'assets/img/apple-touch-icon.png' %}"
        rel="apple-touch-icon"
      />

      <!-- Fonts -->
      <link href="https://fonts.googleapis.com" rel="preconnect" />
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
      <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet"
      />

      <!-- Vendor CSS Files -->
      <link
        href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}"
        rel="stylesheet"
      />
      <link
        href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}"
        rel="stylesheet"
      />
      <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet" />
      <link
        href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}"
        rel="stylesheet"
      />
      <link
        href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}"
        rel="stylesheet"
      />

      <!-- Main CSS File -->
      <link href="{% static 'assets/css/main.css' %}" rel="stylesheet" />

      <!-- IZITOAST -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css" integrity="sha512-DIW4FkYTOxjCqRt7oS9BFO+nVOwDL4bzukDyDtMO7crjUZhwpyrWBFroq+IqRe6VnJkTpRAS6nhDvf0w+wHmxg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

      <!-- DATA TABLES -->
       <link rel="stylesheet" href="https://cdn.datatables.net/2.3.6/css/dataTables.dataTables.css">
       <link rel="stylesheet" href="https://cdn.datatables.net/buttons/3.2.6/css/buttons.dataTables.css">
      {% endblock %}

    <!-- =======================================================
  * Template Name: iPortfolio
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Updated: Jun 29 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body class="index-page">
    <header id="header" class="header dark-background d-flex flex-column">
      <i class="header-toggle d-xl-none bi bi-list"></i>
      <div class="profile-img">
        <img
          src="{% static 'assets/img/logo_web.png' %}"
          alt=""
          class="img-fluid rounded-circle"
        />
      </div>

      <a href="/" class="logo d-flex align-items-center justify-content-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1 class="sitename">Bienvenido {{ user.username }}</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          {% for menu in menus_principales %}
          {% if menu.submenus_list %}
          <li class="dropdown">
            <a href="{% if menu.url %}{{ menu.url }}{% else %}#{% endif %}" class="text-wrap">
              {% if menu.icono %}
              <i class="{{ menu.icono }} navicon"></i>
              {% endif %}
              <span>{{ menu.nombre }}</span>
              <i class="bi bi-chevron-down toggle-dropdown"></i>
            </a>
            <ul>
              {% for submenu in menu.submenus_list %}
              <li>
                <a href="{{ submenu.url }}" class="text-wrap">
                  {% if submenu.icono %}
                  <i class="{{ submenu.icono }}"></i>
                  {% endif %}
                  {{ submenu.nombre }}
                </a>
              </li>
              {% endfor %}
            </ul>
          </li>
          {% else %}
          <li>
            <a href="{{ menu.url }}" class="text-wrap">
              {% if menu.icono %}
              <i class="{{ menu.icono }} navicon"></i>
              {% endif %}
              {{ menu.nombre }}
            </a>
          </li>
          {% endif %}
          {% endfor %}
          {% if user.is_superuser %}
          <li>
            <a href="{% url 'web:menu_list' %}">
              <i class="bi bi-speedometer2 navicon"></i>
              <span>Menús</span>
            </a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </header>

    <!-- Menú Horizontal superior -->


    <main class="main">
      {% if user.is_authenticated %}
      <!-- Topbar Header Horizontal -->
      <nav class="navbar navbar-expand navbar-light bg-white shadow-sm py-3 px-4 mb-4 justify-content-end rounded-bottom mobile-nav-toggle-offset">
        <div class="d-flex align-items-center">
            <div class="dropdown">
                <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle text-dark" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="rounded-circle bg-primary text-white d-flex justify-content-center align-items-center me-2 shadow-sm" style="width: 40px; height: 40px; font-weight: 600; font-size: 0.9rem;">
                        {% if user.first_name and user.last_name %}
                            {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                        {% else %}
                            {{ user.username|slice:":2"|upper }}
                        {% endif %}
                    </div>
                    <span class="d-none d-md-inline fw-semibold">{{ user.get_full_name|default:user.username }}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end border-0 shadow py-2" aria-labelledby="userDropdown">
                    <li>
                        <h6 class="dropdown-header text-truncate" style="max-width: 200px;">{{ user.email }}</h6>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <form method="post" action="{% url 'web:logout' %}" class="w-100">
                            {% csrf_token %}
                            <button type="submit" class="dropdown-item text-danger d-flex align-items-center">
                                <i class="bi bi-box-arrow-right me-2"></i>
                                Cerrar Sesión
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>
      </nav>
      {% endif %}

      {% block content %} 
      {% endblock %}
    </main>

    <footer id="footer" class="footer position-relative light-background">
      <div class="container">
        
      </div>
    </footer>

    <!-- Scroll Top -->
    <a
      href="#"
      id="scroll-top"
      class="scroll-top d-flex align-items-center justify-content-center"
      ><i class="bi bi-arrow-up-short"></i
    ></a>

    <!-- Preloader -->
    <div id="preloader"></div>

    <!-- Vendor JS Files -->
     {{ form.media.js }}
    <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
    <script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
    <script src="{% static 'assets/vendor/typed.js/typed.umd.js' %}"></script>
    <script src="{% static 'assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
    <script src="{% static 'assets/vendor/waypoints/noframework.waypoints.js' %}"></script>
    <script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
    <script src="{% static 'assets/vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>

    <!-- Main JS File -->
    <script src="{% static 'assets/js/main.js' %}"></script>

    <!-- IZITOAST -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.js" integrity="sha512-OmBbzhZ6lgh87tQFDVBHtwfi6MS9raGmNvUNTjDIBb/cgv707v9OuBVpsN6tVVTLOehRFns+o14Nd0/If0lE/A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- DATA TABLES -->
    <script src="https://cdn.datatables.net/2.3.6/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.2.6/js/dataTables.buttons.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.2.6/js/buttons.dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.2.6/js/buttons.html5.min.js"></script>

    <script>
      {% if messages %}
        {% for message in messages %}
          iziToast.{% if message.tags %}{{ message.tags }}{% else %}show{% endif %}({
            title: "Notificación",
            message: "{{ message }}",
            position: "bottomRight",
            timeout: 3000,
            layout: 2,
            balloon: true,
          });
        {% endfor %}
      {% endif %}
    </script>

    <script>
      $(document).ready(function () {
        $('.datatable').DataTable({
          dom: 'Bfrtip',
          buttons: [
            'copyHtml5',
            'excelHtml5',
            'csvHtml5',
            'pdfHtml5'
          ]
        });
      });
    </script>
  </body>
</html>
